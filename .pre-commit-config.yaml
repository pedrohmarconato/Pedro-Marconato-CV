# ğŸ›¡ï¸ PRE-COMMIT HOOKS - PEDRO MARCONATO CV
# ValidaÃ§Ãµes automÃ¡ticas antes de commits

repos:
  - repo: local
    hooks:
      - id: project-validator
        name: ğŸ” Validador do Projeto
        entry: python validate-project.py
        language: system
        pass_filenames: false
        always_run: true
        stages: [commit]
        
      - id: regras-reminder
        name: ğŸ“‹ Lembrete das Regras
        entry: bash -c 'echo "âš ï¸  LEMBRE-SE: Consulte REGRAS_PROJETO.md antes de modificar cÃ³digo!"'
        language: system
        pass_filenames: false
        always_run: true
        stages: [commit]
        
      - id: check-forbidden-files
        name: ğŸš« Verificar Arquivos Proibidos
        entry: bash -c 'if find . -name "*_backup.html" -o -name "test-*.html" | grep -q .; then echo "âŒ Arquivos proibidos encontrados!"; exit 1; fi'
        language: system
        pass_filenames: false
        always_run: true
        
      - id: template-consistency
        name: ğŸ”„ Verificar ConsistÃªncia PT/EN
        entry: bash -c 'python -c "
import os
companies = set()
for f in os.listdir(\"templates/companies\"):
    if f.endswith(\".html\"):
        if f.endswith(\"_pt.html\"):
            companies.add(f[:-8])
        else:
            companies.add(f[:-5])
            
missing = []
for c in companies:
    if not os.path.exists(f\"templates/companies/{c}.html\"):
        missing.append(f\"{c}.html\")
    if not os.path.exists(f\"templates/companies/{c}_pt.html\"):
        missing.append(f\"{c}_pt.html\")
        
if missing:
    print(f\"âŒ Templates faltando: {missing}\")
    exit(1)
else:
    print(\"âœ… ConsistÃªncia PT/EN OK\")
"'
        language: system
        pass_filenames: false
        always_run: true